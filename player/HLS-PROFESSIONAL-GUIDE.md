# ANT-OTT-PLAYER - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ HLS

## ‚úÖ –¢–µ–∫—É—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
1. **‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ HLS –ø–æ—Ç–æ–∫–æ–≤** - —á–µ—Ä–µ–∑ HLS.js —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏
2. **‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞** - ABR (Adaptive Bitrate)
3. **‚úÖ –†—É—á–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞** - –º–µ–Ω—é —Å –≤—ã–±–æ—Ä–æ–º –ø—Ä–æ—Ñ–∏–ª—è
4. **‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—É–¥–∏–æ-–¥–æ—Ä–æ–∂–µ–∫** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ
5. **‚úÖ Proxy –¥–ª—è CORS** - –æ–±—Ö–æ–¥ CORS —á–µ—Ä–µ–∑ proxy.php
6. **‚úÖ –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è** - 30s –≤–ø–µ—Ä—ë–¥, 30s –Ω–∞–∑–∞–¥ (–∫–∞–∫ YouTube)

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–µ–µ—Ä

### –ó–∞–≥—Ä—É–∑–∫–∞ HLS:
```javascript
// –ü–ª–µ–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç master.m3u8
2. –ü–∞—Ä—Å–∏—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (360p, 480p, 720p, 1080p)
3. –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∞—É–¥–∏–æ-–¥–æ—Ä–æ–∂–∫–∏
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ master.m3u8:
```m3u8
#EXTM3U
#EXT-X-VERSION:3

# –ü—Ä–æ—Ñ–∏–ª—å 360p
#EXT-X-STREAM-INF:BANDWIDTH=800000,RESOLUTION=640x360,CODECS="avc1.42c01e,mp4a.40.2"
profile_1_360p/master.m3u8

# –ü—Ä–æ—Ñ–∏–ª—å 480p
#EXT-X-STREAM-INF:BANDWIDTH=1400000,RESOLUTION=854x480,CODECS="avc1.42c01e,mp4a.40.2"
profile_2_480p/master.m3u8

# –ü—Ä–æ—Ñ–∏–ª—å 720p
#EXT-X-STREAM-INF:BANDWIDTH=2800000,RESOLUTION=1280x720,CODECS="avc1.64001f,mp4a.40.2"
profile_3_720p/master.m3u8

# –ü—Ä–æ—Ñ–∏–ª—å 1080p
#EXT-X-STREAM-INF:BANDWIDTH=5000000,RESOLUTION=1920x1080,CODECS="avc1.640028,mp4a.40.2"
profile_4_1080p/master.m3u8
```

### –ê—É–¥–∏–æ-–¥–æ—Ä–æ–∂–∫–∏ –≤ HLS:
```m3u8
# –í –∫–∞–∂–¥–æ–º –ø—Ä–æ—Ñ–∏–ª–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—É–¥–∏–æ:
#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="audio",NAME="Russian",LANGUAGE="ru",DEFAULT=YES,AUTOSELECT=YES,URI="audio1/audio.m3u8"
#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="audio",NAME="English",LANGUAGE="en",DEFAULT=NO,AUTOSELECT=NO,URI="audio2/audio.m3u8"
```

## üîß –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è HLS.js

```javascript
{
  // –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è (YouTube-style)
  maxBufferLength: 30,           // 30 —Å–µ–∫—É–Ω–¥ –≤–ø–µ—Ä—ë–¥
  backBufferLength: 30,          // 30 —Å–µ–∫—É–Ω–¥ –Ω–∞–∑–∞–¥
  maxBufferSize: 100MB,          // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞
  
  // –ö–∞—á–µ—Å—Ç–≤–æ
  startLevel: -1,                // –ê–≤—Ç–æ-–≤—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞
  capLevelToPlayerSize: false,   // –ù–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –ø–æ —Ä–∞–∑–º–µ—Ä—É –ø–ª–µ–µ—Ä–∞
  
  // ABR (Adaptive Bitrate)
  abrBandWidthFactor: 0.95,      // –ó–∞–ø–∞—Å –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–∞—á–µ—Å—Ç–≤–∞
  abrMaxWithRealBitrate: true,   // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π bitrate
  
  // Retry
  manifestLoadingMaxRetry: 3,    // 3 –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞
  fragLoadingMaxRetry: 6,        // 6 –ø–æ–ø—ã—Ç–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ–≥–º–µ–Ω—Ç–∞
}
```

## üìã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:
```powershell
cd "C:\Users\user\Desktop\Php ant Lumi"
php -S localhost:8000
```

### 2. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–ª–µ–µ—Ä–∞:
```
http://localhost:8000/player/
```

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ:
```
# –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç URL:
http://ant-tv.ddns.net/vod/hls/lun4/KINOTK/[–Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞]/master.m3u8

# –ü—Ä–∏–º–µ—Ä:
http://ant-tv.ddns.net/vod/hls/lun4/KINOTK/Odin.doma.1990.BDRip-AVC/master.m3u8
```

## üé¨ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞:
1. –ù–∞–≤–µ–¥–∏—Ç–µ –º—ã—à—å –Ω–∞ –≤–∏–¥–µ–æ
2. –ü–æ—è–≤—è—Ç—Å—è –∫–æ–Ω—Ç—Ä–æ–ª—ã
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –∫–∞—á–µ—Å—Ç–≤–∞ (—Å–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É)
4. –í—ã–±–µ—Ä–∏—Ç–µ –∂–µ–ª–∞–µ–º–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏–ª–∏ "Auto"

### –°–º–µ–Ω–∞ –∞—É–¥–∏–æ-–¥–æ—Ä–æ–∂–∫–∏:
1. –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—É–¥–∏–æ-–¥–æ—Ä–æ–∂–µ–∫
2. –ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä—è–¥–æ–º —Å –∫–∞—á–µ—Å—Ç–≤–æ–º
3. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —è–∑—ã–∫

### –°—É–±—Ç–∏—Ç—Ä—ã:
1. –ï—Å–ª–∏ –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ –µ—Å—Ç—å —Å—É–±—Ç–∏—Ç—Ä—ã
2. –ü–æ—è–≤–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "CC"
3. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —è–∑—ã–∫ —Å—É–±—Ç–∏—Ç—Ä–æ–≤

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –í–æ –≤–∫–ª–∞–¥–∫–µ "Console" —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:
   ```
   [Player] –ó–∞–≥—Ä—É–∑–∫–∞ HLS (YouTube-optimized): [URL]
   [Player] –ú–∞–Ω–∏—Ñ–µ—Å—Ç —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω
   [Player] –ö–∞—á–µ—Å—Ç–≤–æ: 1080p, 5000 kbps
   [Player] –ê—É–¥–∏–æ-–¥–æ—Ä–æ–∂–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
   ```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "Network" –≤ DevTools
2. –§–∏–ª—å—Ç—Ä: "media" –∏–ª–∏ "m3u8"
3. –°–º–æ—Ç—Ä–∏—Ç–µ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã:
   - master.m3u8
   - segment_*.ts
   - audio1_segment_*.ts

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### –í–∏–¥–µ–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:
- **–ü—Ä–∏—á–∏–Ω–∞**: CORS –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL –∏ —Ä–∞–±–æ—Ç—É proxy.php

#### –ö–∞—á–µ—Å—Ç–≤–æ –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è:
- **–ü—Ä–∏—á–∏–Ω–∞**: –í –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–æ—Ñ–∏–ª—å
- **–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ master.m3u8 —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–∏–ª–µ–π

#### –ó–≤—É–∫ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏:
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã –∞—É–¥–∏–æ
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∞—É–¥–∏–æ-—Å–µ–≥–º–µ–Ω—Ç–æ–≤

#### –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –º–µ–¥–ª–µ–Ω–Ω–∞—è:
- **–ü—Ä–∏—á–∏–Ω–∞**: –ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä
- **–†–µ—à–µ–Ω–∏–µ**: –£–º–µ–Ω—å—à–∏—Ç–µ `maxBufferLength` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö HLS

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–µ–µ—Ä–∞

### –î–æ—Å—Ç—É–ø–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- **–ö–∞—á–µ—Å—Ç–≤–æ**: –¢–µ–∫—É—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å (360p/480p/720p/1080p)
- **–ë–∏—Ç—Ä–µ–π—Ç**: –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ—Ç–æ–∫–∞ –≤ kbps
- **–ë—É—Ñ–µ—Ä**: –ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å–µ–∫—É–Ω–¥ –≤–ø–µ—Ä—ë–¥
- **–ö–æ–¥–µ–∫–∏**: –í–∏–¥–µ–æ/–∞—É–¥–∏–æ –∫–æ–¥–µ–∫–∏
- **FPS**: –ß–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
2. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å —Å–ø—Ä–∞–≤–∞
3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## ‚öôÔ∏è API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –î–æ—Å—Ç—É–ø –∫ –ø–ª–µ–µ—Ä—É:
```javascript
// –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç
window.VideoPlayerAPI

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
VideoPlayerAPI.play()
VideoPlayerAPI.pause()
VideoPlayerAPI.seek(120) // 2 –º–∏–Ω—É—Ç—ã

// –ö–∞—á–µ—Å—Ç–≤–æ
VideoPlayerAPI.setQuality(2) // –ü—Ä–æ—Ñ–∏–ª—å 3 (720p)

// –ì—Ä–æ–º–∫–æ—Å—Ç—å
VideoPlayerAPI.setVolume(0.5) // 50%

// –°–æ—Å—Ç–æ—è–Ω–∏–µ
const state = VideoPlayerAPI.getState()
console.log(state.currentQuality)
```

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### YouTube-style:
1. **–ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è 30s** - –±—ã—Å—Ç—Ä–∞—è –ø–µ—Ä–µ–º–æ—Ç–∫–∞
2. **–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ–≥–º–µ–Ω—Ç–æ–≤** - –ø–ª–∞–≤–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
3. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –±–∏—Ç—Ä–µ–π—Ç** - –∞–≤—Ç–æ–≤—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞
4. **–ë—ã—Å—Ç—Ä—ã–µ retry** - —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- Worker thread –¥–ª—è HLS
- Hardware acceleration
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—É—Ñ–µ—Ä

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–ª–µ–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HLS —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏ —Ä—É—á–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –∞—É–¥–∏–æ-–¥–æ—Ä–æ–∂–µ–∫
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —É—Ä–æ–≤–Ω—è YouTube
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–º master.m3u8 —Ñ–∞–π–ª–µ.

---

**–í–µ—Ä—Å–∏—è**: ANT-OTT-PLAYER v3.0
**–î–∞—Ç–∞**: 28 –Ω–æ—è–±—Ä—è 2025
